<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coding Standards Tool - Gemini AI</title>

  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet" />

  <!-- Your custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
  <!-- Dashboard Header -->
<div class="dashboard-header d-flex align-items-center justify-content-between px-4 py-3 mb-3">
  <div class="logo-wrapper">
    <img src="{{ url_for('static', filename='images/eNoah_Logo.png') }}" alt="Organization Logo" class="org-logo" />
  </div>
  <div class="text-center flex-grow-1">
    <span class="display-5 fw-bold d-block">Coding Standards Tool</span>
    <div class="lead text-muted mt-1" style="font-size:1.15rem;">
      Analyze, improve, and enhance your code standards effortlessly.
    </div>
  </div>
  <!-- Optional: right empty space to balance layout -->
  <div style="width: 60px;"></div>
</div>


  <div class="container-main d-flex gap-4 mx-auto max-w-1200 flex-wrap">
    <!-- LEFT PANEL: Form -->
    <div class="left-panel bg-white rounded shadow p-4 flex-grow-1 flex-basis-400">
      <form method="POST" onsubmit="showLoader()">
        <div class="mb-3">
          <label for="language" class="form-label fw-semibold">Select Language (optional):</label>
          <select class="form-select" id="language" name="language">
            <option value="">Auto Detect</option>
            {% for lang in languages %}
              <option value="{{ lang }}" {% if selected_language == lang %}selected{% endif %}>
                {{ lang|capitalize }}
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="code" class="form-label fw-semibold">Enter Your Code:</label>
          <textarea
            class="form-control"
            id="code"
            name="code"
            placeholder="Paste your code here..."
            required
          >{{ code_input }}</textarea>
        </div>

        <div class="d-flex gap-3 justify-content-center flex-wrap">
          <button type="submit" name="analyze" class="btn btn-primary fw-semibold">
            <span class="bi bi-search me-1"></span> Analyze Code
          </button>
          <button type="submit" name="clear" class="btn btn-danger fw-semibold">
            <span class="bi bi-broom me-1"></span> Clear
          </button>
        </div>
      </form>
    </div>

    <!-- RIGHT PANEL: Tabs -->
    <div class="right-panel bg-white rounded shadow p-4 flex-grow-2 min-w-400">
      <ul class="nav nav-tabs mb-3" id="resultTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active d-flex align-items-center"
            id="errors-tab"
            data-bs-toggle="tab"
            data-bs-target="#errors"
            type="button"
            role="tab"
            aria-controls="errors"
            aria-selected="true"
          >
            <span class="bi bi-x-circle-fill text-danger me-1" aria-hidden="true"></span> Errors
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link d-flex align-items-center"
            id="suggestions-tab"
            data-bs-toggle="tab"
            data-bs-target="#suggestions"
            type="button"
            role="tab"
            aria-controls="suggestions"
            aria-selected="false"
          >
            <span class="bi bi-check-circle-fill text-success me-1" aria-hidden="true"></span> Suggestions
          </button>
        </li>
        <li class="nav-item" role="presentation" style="min-width: 180px;">
          <button
            class="nav-link revised-tab d-flex align-items-center justify-content-between"
            id="revised-tab"
            data-bs-toggle="tab"
            data-bs-target="#revised"
            type="button"
            role="tab"
            aria-controls="revised"
            aria-selected="false"
            style="gap: 0.5rem;"
          >
            <span><i class="bi bi-pencil-square me-1"></i> Revised Code</span>
            <span
              class="copy-icon-btn"
              onclick="event.stopPropagation(); copyRevisedCode();"
              title="Copy revised code"
              aria-label="Copy revised code"
              tabindex="0"
              style="cursor:pointer; font-size:1.3rem; color: #198754;"
            >ðŸ“‹</span>
          </button>
        </li>
      </ul>

      <!-- Tab content -->
      <div class="tab-content flex-grow-1" id="resultTabsContent">
        <div class="tab-pane fade show active" id="errors" role="tabpanel" aria-labelledby="errors-tab">
          <pre><span class="bi bi-exclamation-triangle-fill text-warning me-1"></span> {% if errors and errors.strip() %}{{ errors }}{% else %}Please paste your code and click Analyze.{% endif %}</pre>
        </div>
        <div class="tab-pane fade" id="suggestions" role="tabpanel" aria-labelledby="suggestions-tab">
          <pre><span class="bi bi-info-circle-fill text-info me-1"></span> {% if suggestions and suggestions.strip() %}{{ suggestions }}{% else %}Suggestions will appear here after analysis.{% endif %}</pre>
        </div>
        <div class="tab-pane fade" id="revised" role="tabpanel" aria-labelledby="revised-tab">
          <pre><span class="bi bi-pencil-square me-1"></span> {% if revised_code and revised_code.strip() %}{{ revised_code }}{% else %}Revised code will be shown here after analysis.{% endif %}</pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Loader -->
  <div id="loader" aria-live="polite" aria-busy="true">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <!-- <p class="fs-5 text-primary fw-semibold">Analyzing your code, please wait...</p> -->
     <p class="fs-5 text-brand-orange fw-semibold">Analyzing your code, please wait...</p>

  </div>

  <!-- Bootstrap Bundle JS (with Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Your custom JS -->
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
